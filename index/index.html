<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>洛谷用户卡片生成器 - 动态生成个性化洛谷成就卡片 | Luogu User Card</title>
    <link rel="icon" href="/favicon.png" type="image/png">
    <meta name="Keywords" content="洛谷, Luogu, 用户卡片, 生成器, 洛谷数据, 咕值, 练习情况, 成就卡片, Luogu User Card, 洛谷卡片生成器">
    <meta name="description" content="使用洛谷用户卡片生成器，轻松动态生成并自定义您的洛谷基本信息、练习情况、咕值等多种样式的成就卡片。支持深色模式、自定义宽度，可嵌入博客、GitHub等。">

    <script defer src="https://umami.jerryz.com.cn/script.js"
        data-website-id="53c03091-344a-406b-9323-36ca8c258054"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2597042766299857"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-plus/2.3.8/index.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/element-plus/2.3.8/index.full.min.js"></script>
    <script src="https://unpkg.com/element-plus@2.3.8/dist/locale/zh-cn.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;700&family=Noto+Serif+SC:wght@400;700&family=Nunito:wght@300;400;600;700&display=swap"
        rel="stylesheet">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "洛谷用户卡片生成器",
      "description": "使用洛谷用户卡片生成器，轻松动态生成并自定义您的洛谷基本信息、练习情况、咕值等多种样式的成就卡片。支持深色模式、自定义宽度，可嵌入博客、GitHub等。",
      "applicationCategory": "Utilities",
      "operatingSystem": "All",
      "url": "https://api.jerryz.com.cn/", 
      "offers": {
        "@type": "Offer",
        "price": "0" 
      },
      "creator": {
        "@type": "Person", 
        "name": "YangguangZhou" 
      }
    }
    </script>

    <style>
        /* Global Styles */
        :root {
            --primary-color: #3B82F6;
            --primary-light: #DBEAFE;
            --primary-dark: #2563EB;
            --accent-color: #EC4899;
            --text-primary: #111827;
            --text-secondary: #4B5563;
            --bg-primary: #F3F4F6;
            --bg-secondary: #FFFFFF;
            --border-color: #E5E7EB;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 1rem;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --el-component-size: 40px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body,
        html {
            font-family: 'Nunito', 'Noto Serif SC', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            scroll-behavior: smooth;
            height: 100%;
            width: 100%;
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #CBD5E1;
            border-radius: var(--radius-sm);
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: #94A3B8;
        }

        ::-webkit-scrollbar-track {
            background-color: transparent;
        }

        /* App Container */
        #app {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-md);
        }

        /* Cards & Sections */
        .card {
            background-color: var(--bg-secondary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-lg);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
            border-color: var(--primary-light);
        }

        section {
            margin-bottom: var(--spacing-xl);
        }

        /* Typography */
        .title {
            font-family: 'Nunito', 'Noto Serif SC', sans-serif;
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
            font-weight: 800;
            letter-spacing: -0.025em;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .description {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto var(--spacing-xl);
            line-height: 1.7;
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-lg);
            color: var(--text-primary);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .section-title::before {
            content: "";
            display: block;
            width: 6px;
            height: 24px;
            background: linear-gradient(to bottom, var(--primary-color), var(--primary-dark));
            border-radius: var(--radius-sm);
        }

        /* Preview Image */
        .image-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .image-container {
            width: 100%;
            max-width: 700px;
            margin: var(--spacing-md) 0;
            position: relative;
            overflow: hidden;
            line-height: 0;
            background-color: transparent;
            border-radius: var(--radius-md);
            transition: var(--transition);
        }
        
        .image-container:hover {
            transform: scale(1.01);
        }

        .preview-image {
            width: 100%;
            height: auto;
            object-fit: contain;
            display: block;
            background-color: transparent;
        }

        /* Image Link */
        .image-link-container {
            width: 100%;
            max-width: 700px;
            margin: var(--spacing-md) auto;
        }

        .image-link {
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            word-break: break-all;
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: block;
            width: 100%;
        }

        .image-link:hover {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            color: var(--primary-dark);
        }

        /* Form Elements */
        .form-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-group label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        /* Card Type Selector */
        .card-type-selector {
            margin-bottom: var(--spacing-lg);
        }

        /* Example Cards */
        .example-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .example-card {
            text-align: center;
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
        }

        .example-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-md);
            transform: translateY(-4px);
        }

        .example-card img {
            width: 100%;
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            box-shadow: var(--shadow-sm);
        }

        .example-card h3 {
            font-size: 1.1rem;
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
        }

        .example-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Code Blocks */
        .code-block {
            background-color: #F8FAFC;
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin: var(--spacing-sm) 0;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            white-space: pre-wrap;
            word-break: break-all;
            font-size: 0.85rem;
            color: #334155;
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--primary-color);
            transition: var(--transition);
        }
        
        .code-block:hover {
            border-color: var(--primary-light);
            box-shadow: var(--shadow-sm);
        }

        /* Footer */
        .footer {
            margin-top: var(--spacing-2xl);
            padding-top: var(--spacing-xl);
            border-top: 1px solid var(--border-color);
            text-align: center;
        }

        .help-text,
        .counter,
        .copyright {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: var(--spacing-md);
        }

        .copyright a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            position: relative;
        }

        .copyright a:hover {
            color: var(--primary-dark);
        }
        
        .copyright a::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 1px;
            bottom: -2px;
            left: 0;
            background-color: var(--primary-dark);
            transform: scaleX(0);
            transform-origin: bottom right;
            transition: transform 0.3s ease-out;
        }
        
        .copyright a:hover::after {
            transform: scaleX(1);
            transform-origin: bottom left;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 0;
                transform: translateY(5px);
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease forwards;
        }

        .fade-out {
            animation: fadeOut 0.3s ease forwards;
        }

        /* Customize Element Plus */
        .el-button {
            border-radius: var(--radius-md);
            font-weight: 600;
            transition: var(--transition);
        }

        .el-button--primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .el-button--primary:hover,
        .el-button--primary:focus {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        .el-input__wrapper {
            border-radius: var(--radius-md) !important;
            box-shadow: 0 0 0 1px var(--border-color) inset !important;
        }
        
        .el-input__wrapper.is-focus {
            box-shadow: 0 0 0 1px var(--primary-color) inset !important;
        }

        .el-radio-button__inner {
            border-radius: 0;
            border: 1px solid var(--border-color);
            border-left: 0;
        }
        
        .el-radio-button:first-child .el-radio-button__inner {
            border-left: 1px solid var(--border-color);
            border-top-left-radius: var(--radius-md);
            border-bottom-left-radius: var(--radius-md);
        }

        .el-radio-group .el-radio-button:last-child .el-radio-button__inner {
            border-top-right-radius: var(--radius-md);
            border-bottom-right-radius: var(--radius-md);
        }
        
        .el-radio-button__original-radio:checked + .el-radio-button__inner {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            box-shadow: -1px 0 0 0 var(--primary-color);
        }

        /* Width Slider Improvements */
        .width-slider-container {
            margin-top: var(--spacing-sm);
            padding: 0 var(--spacing-xs);
        }

        .width-value-display {
            text-align: center;
            margin-bottom: var(--spacing-sm);
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            :root {
                --spacing-lg: 1rem;
                --spacing-xl: 1.5rem;
                --spacing-2xl: 2rem;
            }

            #app {
                padding: var(--spacing-md);
            }

            .title {
                font-size: 1.8rem;
            }
            
            .card {
                padding: var(--spacing-lg);
            }

            .example-cards {
                grid-template-columns: 1fr;
                gap: var(--spacing-md);
            }
            
            .el-radio-group {
                display: flex;
                flex-wrap: wrap;
            }
            
            .el-radio-button {
                flex: 1 0 45%;
            }
            
            .el-radio-button__inner {
                width: 100%;
            }
            
            .el-radio-button:first-child .el-radio-button__inner {
                border-radius: var(--radius-md) 0 0 0;
            }
            
            .el-radio-button:nth-child(2) .el-radio-button__inner {
                border-radius: 0 var(--radius-md) 0 0;
                border-right: 1px solid var(--border-color);
            }
            
            .el-radio-button:nth-child(3) .el-radio-button__inner {
                border-radius: 0 0 0 var(--radius-md);
                border-left: 1px solid var(--border-color);
                border-top: 0;
            }
            
            .el-radio-button:last-child .el-radio-button__inner {
                border-radius: 0 0 var(--radius-md) 0;
                border-top: 0;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.5rem;
            }
            
            .description {
                font-size: 1rem;
            }
            
            .el-radio-button {
                flex: 1 0 100%;
            }
            
            .el-radio-button__inner {
                border-radius: 0 !important;
                border: 1px solid var(--border-color) !important;
                border-bottom: 0 !important;
            }
            
            .el-radio-button:first-child .el-radio-button__inner {
                border-top-left-radius: var(--radius-md) !important;
                border-top-right-radius: var(--radius-md) !important;
            }
            
            .el-radio-button:last-child .el-radio-button__inner {
                border-bottom-left-radius: var(--radius-md) !important;
                border-bottom-right-radius: var(--radius-md) !important;
                border-bottom: 1px solid var(--border-color) !important;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <h1 class="title">洛谷用户卡片生成器</h1>
        <p class="description">
            Luogu-User-Card是一个动态生成洛谷用户数据卡片的工具，可以展示用户的基本信息、做题情况、咕值信息等，可以插入到个人主页、博客、GitHub等支持插入图片的地方。
        </p>

        <section class="card-type-selector">
            <div class="card">
                <h2 class="section-title">卡片类型选择</h2>
                <el-radio-group v-model="cardType" @change="updatePreview">
                    <el-radio-button label="practice">练习情况</el-radio-button>
                    <el-radio-button label="about">基本信息</el-radio-button>
                    <el-radio-button label="guzhi">咕值信息</el-radio-button>
                    <el-radio-button label="shield">练习徽章</el-radio-button>
                </el-radio-group>

                <div class="example-cards">
                    <div class="example-card" @click="selectCardType('practice')">
                        <img src="https://api.jerryz.com.cn/practice?id=123456&custom=true&name=%E6%B5%8B%E8%AF%95%E7%94%A8%E6%88%B7&color=Orange&ccfLevel=6&tag=%E6%B5%8B%E8%AF%95&passed=5,50,55,75,90,60,20,10&unpassed=5" alt="练习情况卡片示例">
                        <h3>练习情况</h3>
                        <p>详细展示用户的做题情况</p>
                    </div>
                    <div class="example-card" @click="selectCardType('about')">
                        <img src="https://api.jerryz.com.cn/about?id=123456&custom=true&name=%E6%B5%8B%E8%AF%95%E7%94%A8%E6%88%B7&color=Orange&ccfLevel=6&tag=%E6%B5%8B%E8%AF%95&slogan=%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E4%B8%AA%E6%80%A7%E7%AD%BE%E5%90%8D&followerCount=56&followingCount=25&ranking=1234&userType=%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7" alt="基本信息卡片示例">
                        <h3>基本信息</h3>
                        <p>显示用户类型、关注、咕值排名、个性签名</p>
                    </div>
                    <div class="example-card" @click="selectCardType('guzhi')">
                        <img src="https://api.jerryz.com.cn/guzhi?id=123456&scores=100,25,10,40,20&custom=true&name=%E6%B5%8B%E8%AF%95%E7%94%A8%E6%88%B7&color=Orange&ccfLevel=6&tag=%E6%B5%8B%E8%AF%95&ranking=1234" alt="咕值信息卡片示例">
                        <h3>咕值信息</h3>
                        <p>展示用户的咕值详情</p>
                    </div>
                    <div class="example-card" @click="selectCardType('shield')">
                        <img src="https://api.jerryz.com.cn/shield?id=123456&custom=true&name=%E6%B5%8B%E8%AF%95%E7%94%A8%E6%88%B7&color=Orange&ccfLevel=6&tag=%E6%B5%8B%E8%AF%95&passed=5,50,55,75,90,60,20,10&unpassed=5" alt="练习徽章示例">
                        <h3>练习徽章</h3>
                        <p>简洁显示用户做题数据</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="image-section">
            <div class="image-container">
                <el-image class="preview-image" :src="previewUrl" :alt="userId + '的洛谷' + cardType + '卡片预览'"
                    @click="openImage" fit="cover">
                    <template #placeholder>
                        <div
                            style="display: flex; justify-content: center; align-items: center; height: 300px; background-color: #f5f7fa;">
                            <el-icon style="font-size: 30px;"><i class="el-icon-loading"></i></el-icon>
                        </div>
                    </template>
                </el-image>
            </div>

            <div class="image-link-container">
                <div class="image-link" @click="copyToClipboard">
                    <span :id="'link'" ref="linkText">{{ previewUrl }}</span>
                </div>
            </div>

            <div class="image-link-container">
                <div class="code-block" @click="copyMarkdownCode" style="cursor: pointer;">
                    <span ref="markdownText">{{ markdownCode }}</span>
                </div>
                <div style="text-align: center; margin-top: 5px; font-size: 0.8rem; color: var(--text-secondary);">
                    点击复制 Markdown 代码
                </div>
            </div>
        </section>

        <section>
            <h2 class="section-title">基本设置</h2>
            <div class="card">
                <div class="form-container">
                    <div class="form-group">
                        <label>洛谷用户 ID</label>
                        <el-input v-model="userId" placeholder="输入洛谷用户ID" @input="updatePreview"></el-input>
                    </div>

                    <template v-if="cardType === 'guzhi'">
                        <div class="form-group">
                            <label>基础信用</label>
                            <el-input-number v-model="guzhiScore1" :min="0" :max="100"
                                @change="updateGuzhiScores"></el-input-number>
                        </div>
                        <div class="form-group">
                            <label>练习情况</label>
                            <el-input-number v-model="guzhiScore2" :min="0" :max="100"
                                @change="updateGuzhiScores"></el-input-number>
                        </div>
                        <div class="form-group">
                            <label>社区贡献</label>
                            <el-input-number v-model="guzhiScore3" :min="0" :max="100"
                                @change="updateGuzhiScores"></el-input-number>
                        </div>
                        <div class="form-group">
                            <label>比赛情况</label>
                            <el-input-number v-model="guzhiScore4" :min="0" :max="100"
                                @change="updateGuzhiScores"></el-input-number>
                        </div>
                        <div class="form-group">
                            <label>获得成就</label>
                            <el-input-number v-model="guzhiScore5" :min="0" :max="100"
                                @change="updateGuzhiScores"></el-input-number>
                        </div>
                    </template>
                </div>
            </div>
        </section>

        <section>
            <h2 class="section-title">自定义选项</h2>
            <div class="card">
                <div class="form-container">
                    <div class="form-group">
                        <label>开启自定义模式</label>
                        <el-switch v-model="customMode" @change="updatePreview"></el-switch>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                            开启后，您可以手动输入所有数据，不再依赖洛谷 API。适用于 API 故障或需要生成特定数据的情况。
                        </div>
                    </div>

                    <template v-if="customMode">
                        <div class="form-group">
                            <label>用户名</label>
                            <el-input v-model="customName" @input="updatePreview"></el-input>
                        </div>
                        <div class="form-group">
                            <label>颜色</label>
                            <el-select v-model="customColor" @change="updatePreview">
                                <el-option label="Gray" value="Gray"></el-option>
                                <el-option label="Blue" value="Blue"></el-option>
                                <el-option label="Green" value="Green"></el-option>
                                <el-option label="Orange" value="Orange"></el-option>
                                <el-option label="Red" value="Red"></el-option>
                                <el-option label="Purple" value="Purple"></el-option>
                                <el-option label="Cheater" value="Cheater"></el-option>
                            </el-select>
                        </div>
                        <div class="form-group">
                            <label>CCF等级 (0-10)</label>
                            <el-input-number v-model="customCCFLevel" :min="0" :max="10" @change="updatePreview"></el-input-number>
                        </div>
                        <div class="form-group">
                            <label>标签/徽章</label>
                            <el-input v-model="customTag" @input="updatePreview"></el-input>
                        </div>

                        <template v-if="cardType === 'about'">
                            <div class="form-group">
                                <label>个性签名</label>
                                <el-input v-model="customSlogan" @input="updatePreview"></el-input>
                            </div>
                            <div class="form-group">
                                <label>用户类型</label>
                                <el-input v-model="customUserType" @input="updatePreview"></el-input>
                            </div>
                            <div class="form-group">
                                <label>关注数</label>
                                <el-input-number v-model="customFollowingCount" :min="0" @change="updatePreview"></el-input-number>
                            </div>
                            <div class="form-group">
                                <label>粉丝数</label>
                                <el-input-number v-model="customFollowerCount" :min="0" @change="updatePreview"></el-input-number>
                            </div>
                            <div class="form-group">
                                <label>排名</label>
                                <el-input-number v-model="customRanking" :min="0" @change="updatePreview"></el-input-number>
                            </div>
                        </template>

                        <template v-if="cardType === 'guzhi'">
                            <div class="form-group">
                                <label>排名</label>
                                <el-input-number v-model="customRanking" :min="0" @change="updatePreview"></el-input-number>
                            </div>
                        </template>

                        <template v-if="cardType === 'practice' || cardType === 'shield'">
                            <div class="form-group">
                                <label>未通过数</label>
                                <el-input-number v-model="customUnpassed" :min="0" @change="updatePreview"></el-input-number>
                            </div>
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label>各难度通过数</label>
                                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px;">
                                    <div v-for="(name, index) in difficultyNames" :key="index" style="text-align: center;">
                                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 4px;">{{ name }}</div>
                                        <el-input-number v-model="customPassed[index]" :min="0" @change="updatePreview" style="width: 100%;" :controls="false"></el-input-number>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </template>

                    <div class="form-group">
                        <label>隐藏标题</label>
                        <el-switch v-model="hideTitle" @change="updatePreview"></el-switch>
                    </div>

                    <div class="form-group">
                        <label>黑暗模式</label>
                        <el-switch v-model="darkMode" @change="updatePreview"></el-switch>
                    </div>

                    <div class="form-group" v-if="!customMode">
                        <label>禁用缓存</label>
                        <el-switch v-model="disableCache" @change="updatePreview"></el-switch>
                    </div>

                    <div class="form-group" v-if="cardType !== 'shield'">
                        <label>自定义宽度</label>
                        <div class="width-value-display">{{ cardWidth }}px</div>
                        <div class="width-slider-container">
                            <el-slider v-model="cardWidth" :min="500" :max="1920" :step="10"
                                :format-tooltip="value => `${value}px`" @change="updatePreview">
                            </el-slider>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2 class="section-title">使用说明</h2>
            <div class="card">
                <p>将上方生成的链接复制到任意支持插入图片的地方即可使用。</p>
                <p>如果要在 Markdown 中使用，可以使用以下格式：</p>
                <div class="code-block">![洛谷用户卡片]({{ previewUrl }})</div>
                <p>如果需要添加点击跳转，可以使用以下格式：</p>
                <div class="code-block">[![洛谷用户卡片]({{ previewUrl }})](https://www.luogu.com.cn/user/{{ userId }})</div>

                <div style="margin-top: var(--spacing-lg);">
                    <h3 style="margin-bottom: var(--spacing-sm);">注意事项：</h3>
                    <ul style="list-style-position: inside; padding-left: var(--spacing-md);">
                        <li>为了不滥用洛谷服务器流量，本项目利用 vercel 的边缘缓存功能缓存了 12 小时数据，即同一个用户卡片 <strong>24 小时内最多只会向洛谷服务器请求 2
                                次数据</strong>，并且只有在用户访问卡片时才会请求数据。</li>
                        <li>开启"完全隐私保护"的用户可能无法正常获取数据。</li>
                        <li>咕值信息卡片需要手动输入咕值数据，或者依赖于咕值排名在1000名以内自动获取。</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer class="footer">
            <div class="help-text">
                温馨提示：点击预览图可查看大图，点击链接可复制内容
            </div>

            <div class="copyright">
                <p>Luogu-User-Card 项目由 <a href="https://jerryz.com.cn" target="_blank" rel="noopener noreferrer">Jerry Zhou</a> 开发</p>
                <p>API 服务：<a href="https://api.jerryz.com.cn/" target="_blank" rel="noopener noreferrer">https://api.jerryz.com.cn/</a></p>
                <p>查看更多信息请访问 <a href="https://blog.jerryz.com.cn/article/Luogu-User-Card/" target="_blank" rel="noopener noreferrer">博客</a> 和 <a
                        href="https://github.com/YangguangZhou/Luogu-User-Card" target="_blank"
                        rel="noopener noreferrer">GitHub 项目页面</a></p>
            </div>
        </footer>
    </div>

    <script>
        const { createApp, ref, computed, watch } = Vue;

        const app = createApp({
            setup() {
                // 基本数据
                const cardType = ref('practice');
                const userId = ref('253620');
                const hideTitle = ref(false);
                const darkMode = ref(false);
                const cardWidth = ref(500);
                const disableCache = ref(false);
                
                // 自定义模式数据
                const customMode = ref(false);
                const customName = ref('Jerry');
                const customColor = ref('Green');
                const customCCFLevel = ref(6);
                const customTag = ref('');
                const customSlogan = ref('这是一个自定义的个性签名');
                const customFollowerCount = ref(100);
                const customFollowingCount = ref(20);
                const customRanking = ref(123);
                const customUserType = ref('普通用户');
                const customUnpassed = ref(50);
                const customPassed = ref([10, 20, 30, 40, 50, 60, 70, 80]);
                const difficultyNames = ["未评定", "入门", "普及-", "普及/提高-", "普及+/提高", "提高+/省选-", "省选/NOI-", "NOI/NOI+/CTSC"];

                // 拆分咕值得分为5个单独的值
                const guzhiScore1 = ref(100); // 基础信用
                const guzhiScore2 = ref(14);  // 练习情况
                const guzhiScore3 = ref(0);   // 社区贡献
                const guzhiScore4 = ref(4);   // 比赛情况
                const guzhiScore5 = ref(20);  // 获得成就
                const guzhiScores = computed(() => {
                    return `${guzhiScore1.value},${guzhiScore2.value},${guzhiScore3.value},${guzhiScore4.value},${guzhiScore5.value}`;
                });

                const baseURL = "https://api.jerryz.com.cn/";
                const linkText = ref(null);
                const markdownText = ref(null);

                // 计算预览URL
                const previewUrl = computed(() => {
                    let url = `${baseURL}${cardType.value}?id=${userId.value}`;

                    // 如果是咕值卡片，添加scores参数
                    if (cardType.value === 'guzhi' && guzhiScores.value) {
                        url += `&scores=${guzhiScores.value}`;
                    }

                    // 添加自定义选项
                    if (hideTitle.value) {
                        url += '&hide_title=true';
                    }

                    if (darkMode.value) {
                        url += '&dark_mode=true';
                    }

                    // 只有在非练习徽章类型时添加宽度参数
                    if (cardWidth.value !== 500 && cardType.value !== 'shield') {
                        url += `&card_width=${cardWidth.value}`;
                    }

                    if (disableCache.value) {
                        url += '&disable_cache=true';
                    }

                    if (customMode.value) {
                        url += '&custom=true';
                        url += `&name=${encodeURIComponent(customName.value)}`;
                        url += `&color=${encodeURIComponent(customColor.value)}`;
                        url += `&ccfLevel=${customCCFLevel.value}`;
                        url += `&tag=${encodeURIComponent(customTag.value)}`;

                        if (cardType.value === 'about') {
                            url += `&slogan=${encodeURIComponent(customSlogan.value)}`;
                            url += `&followerCount=${customFollowerCount.value}`;
                            url += `&followingCount=${customFollowingCount.value}`;
                            url += `&ranking=${customRanking.value}`;
                            url += `&userType=${encodeURIComponent(customUserType.value)}`;
                        } else if (cardType.value === 'practice') {
                            url += `&passed=${customPassed.value.join(',')}`;
                            url += `&unpassed=${customUnpassed.value}`;
                        } else if (cardType.value === 'guzhi') {
                            url += `&ranking=${customRanking.value}`;
                        } else if (cardType.value === 'shield') {
                            url += `&passed=${customPassed.value.join(',')}`;
                            url += `&unpassed=${customUnpassed.value}`;
                        }
                    }

                    return url;
                });

                // 计算Markdown代码
                const markdownCode = computed(() => {
                    return `![${userId.value}的洛谷用户卡片](${previewUrl.value})`;
                });

                // 方法
                const updatePreview = () => {
                    // 预览URL会自动更新，因为它是一个计算属性
                };

                const selectCardType = (type) => {
                    cardType.value = type;
                    updatePreview();
                };

                const openImage = () => {
                    window.open(previewUrl.value, "_blank");
                };

                const fadeIn = (element) => {
                    element.classList.add('fade-in');
                    setTimeout(() => {
                        element.classList.remove('fade-in');
                    }, 200);
                };

                const fadeOut = (element) => {
                    element.classList.add('fade-out');
                    setTimeout(() => {
                        element.classList.remove('fade-out');
                    }, 200);
                };

                const copyToClipboard = () => {
                    if (linkText.value) {
                        navigator.clipboard.writeText(previewUrl.value).then(() => {
                            const elementToCopy = linkText.value;
                            fadeOut(elementToCopy);
                            setTimeout(() => {
                                elementToCopy.innerText = '链接已复制到剪贴板';
                                fadeIn(elementToCopy);
                                setTimeout(() => {
                                    fadeOut(elementToCopy);
                                    setTimeout(() => {
                                        elementToCopy.innerText = previewUrl.value;
                                        fadeIn(elementToCopy);
                                    }, 200);
                                }, 1000);
                            }, 200);
                        }).catch(err => {
                            console.error('无法复制链接: ', err);
                            ElementPlus.ElMessage.error('复制失败，请手动复制');
                        });
                    }
                };

                const copyMarkdownCode = () => {
                    if (markdownText.value) {
                        navigator.clipboard.writeText(markdownCode.value).then(() => {
                            ElementPlus.ElMessage.success('Markdown 代码已复制到剪贴板');
                        }).catch(err => {
                            console.error('无法复制 Markdown 代码: ', err);
                            ElementPlus.ElMessage.error('复制失败，请手动复制');
                        });
                    }
                };

                // 更新咕值得分，当单个得分改变时调用
                const updateGuzhiScores = () => {
                    // 由于 guzhiScores 是计算属性，它会自动更新
                    // 只需触发预览更新
                    updatePreview();
                };

                // 添加对卡片类型变化的监听
                watch(cardType, (newType) => {
                    // 如果切换到了练习徽章类型，重置宽度到默认值
                    if (newType === 'shield') {
                        cardWidth.value = 500;
                    }
                });

                return {
                    cardType,
                    userId,
                    hideTitle,
                    darkMode,
                    cardWidth,
                    disableCache,
                    guzhiScores,
                    guzhiScore1,
                    guzhiScore2,
                    guzhiScore3,
                    guzhiScore4,
                    guzhiScore5,
                    previewUrl,
                    markdownCode,
                    linkText,
                    markdownText,
                    updatePreview,
                    selectCardType,
                    openImage,
                    copyToClipboard,
                    copyMarkdownCode,
                    updateGuzhiScores,
                    customMode,
                    customName,
                    customColor,
                    customCCFLevel,
                    customTag,
                    customSlogan,
                    customFollowerCount,
                    customFollowingCount,
                    customRanking,
                    customUserType,
                    customUnpassed,
                    customPassed,
                    difficultyNames
                };
            }
        });

        // 使用Element Plus，并设置中文
        app.use(ElementPlus, {
            locale: ElementPlus.zhCn
        });

        // 挂载应用
        app.mount('#app');
    </script>
</body>

</html>